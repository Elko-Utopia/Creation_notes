<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elko’s Creation Notes</title>
  <style>
    :root{
      --maxw: 960px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,\"Noto Sans\",\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",sans-serif; line-height:1.65;
      color:#111; background:#fff;
    }
    header{ border-bottom:1px solid #e6e6e6; background:#fafafa }
    .wrap{ max-width:var(--maxw); margin:0 auto; padding:18px 16px }
    h1{ margin:0 0 8px 0; font-size: clamp(24px, 4vw, 36px); }
    .sub{ color:#666; margin:0 0 12px 0 }
    .toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
    .btn{ appearance:none; border:1px solid #ccc; background:#fff; padding:6px 12px; border-radius:10px; cursor:pointer; font-size:14px }
    .btn[aria-pressed="true"]{ border-color:#111; font-weight:600 }
    main .wrap{ padding-top:22px }
    .panel{ border:1px solid #eee; border-radius:14px; padding:14px; background:#fff }
    .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:12px }
    figure{ margin:0; border:1px solid #eee; border-radius:12px; overflow:hidden; background:#f8f8f8; display:flex; flex-direction:column }
    figure img{ width:100%; height:160px; object-fit:cover; display:block; background:#ddd }
    figure figcaption{ padding:8px 10px; font-size:12px; color:#444; display:flex; justify-content:space-between; align-items:center; gap:8px }
    .danger{ color:#a00 }
    .uploader{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin:8px 0 }
    .uploader input[type="file"]{ display:none }
    .drop{ border:2px dashed #bbb; border-radius:12px; padding:16px; text-align:center; color:#666 }
    .note{ color:#666; font-size:13px }
    footer{ border-top:1px solid #e6e6e6; background:#fafafa }
    code{ background:#f1f1f1; padding:2px 6px; border-radius:6px }
    label.linklike{ border:1px solid #ccc; border-radius:10px; padding:6px 12px; cursor:pointer; background:#fff }
    form.urladd{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 }
    .urladd input{ padding:6px 10px; border:1px solid #ccc; border-radius:10px; min-width:220px }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1 id="site-title">Elko’s Creation Notes</h1>
      <p class="sub" data-i18n="subtitle">This site documents the conceptual development of the Star of Departure (启航星) universe.</p>
      <div class="toolbar" role="group" aria-label="language switcher">
        <button id="lang-en" class="btn" data-lang="en" aria-pressed="true">English</button>
        <button id="lang-zh" class="btn" data-lang="zh">中文</button>
      </div>
    </div>
  </header>  <main>
    <div class="wrap">
      <section class="panel" aria-labelledby="gallery-title">
        <h2 id="gallery-title" data-i18n="galleryTitle">Image Gallery</h2>
        <p class="note" data-i18n="galleryNote">You can add images from your device (preview only, not saved to the server) or insert images already stored in this repository by URL.</p><div class="uploader">
      <label for="fileInput" class="linklike" data-i18n="chooseFiles">Choose images…</label>
      <input id="fileInput" type="file" accept="image/*" multiple />
      <span class="note" data-i18n="dragHint">You may also drag and drop files into the box below.</span>
    </div>

    <div id="dropZone" class="drop" data-i18n="dropHere">Drop images here</div>

    <form class="urladd" id="urlForm">
      <input type="url" id="imgUrl" placeholder="https://raw.githubusercontent.com/&lt;user&gt;/&lt;repo&gt;/main/path/image.jpg" aria-label="image url" />
      <input type="text" id="imgAlt" placeholder="alt text / 描述" aria-label="alt text" />
      <button type="submit" class="btn" data-i18n="addFromUrl">Add from URL</button>
    </form>

    <div id="gallery" class="grid" aria-live="polite" aria-busy="false"></div>
    <p class="note" data-i18n="persistNote">Files chosen from your device are displayed locally and will not persist after you refresh. To keep images permanently, commit them to this repository and reference their paths or use the form above to add by URL.</p>
  </section>
</div>

  </main>  <footer>
    <div class="wrap">
      <p class="note">© <span id="year"></span> Elko-Utopia · <span data-i18n="powered">Powered by GitHub Pages</span></p>
    </div>
  </footer>  <script>
    // i18n dictionary
    const I18N = {
      en: {
        subtitle: "This site documents the conceptual development of the Star of Departure (启航星) universe.",
        galleryTitle: "Image Gallery",
        galleryNote: "You can add images from your device (preview only, not saved to the server) or insert images already stored in this repository by URL.",
        chooseFiles: "Choose images…",
        dragHint: "You may also drag and drop files into the box below.",
        dropHere: "Drop images here",
        addFromUrl: "Add from URL",
        persistNote: "Files chosen from your device are displayed locally and will not persist after you refresh. To keep images permanently, commit them to this repository and reference their paths or use the form above to add by URL.",
        powered: "Powered by GitHub Pages"
      },
      zh: {
        subtitle: "本网站用于记录“启航星”概念世界的开发过程与设计笔记。",
        galleryTitle: "图片画廊",
        galleryNote: "可以从本地设备选择图片进行预览（仅在当前页面显示，服务器不会保存），也可以通过仓库内图片的 URL 插入。",
        chooseFiles: "选择图片…",
        dragHint: "也可以把文件拖拽到下面的区域。",
        dropHere: "把图片拖到这里",
        addFromUrl: "通过 URL 添加",
        persistNote: "从本地选择的文件仅在本页预览，刷新后不会保留。若需要长期保存，请把图片提交到仓库并引用其路径，或使用上方表单通过 URL 添加。",
        powered: "由 GitHub Pages 提供"
      }
    };

    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    function setLang(lang){
      const dict = I18N[lang] || I18N.en;
      document.documentElement.lang = lang;
      $$('#lang-en, #lang-zh').forEach(btn=> btn.setAttribute('aria-pressed', String(btn.dataset.lang===lang)));
      $$('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if(dict[key]) el.textContent = dict[key];
      });
      localStorage.setItem('elko_lang', lang);
    }

    // Initial language
    setLang(localStorage.getItem('elko_lang') || 'en');
    $('#lang-en').addEventListener('click', ()=> setLang('en'));
    $('#lang-zh').addEventListener('click', ()=> setLang('zh'));

    // Year
    $('#year').textContent = new Date().getFullYear();

    // Image gallery helpers
    const gallery = $('#gallery');
    const dropZone = $('#dropZone');

    function addImage(src, alt){
      const fig = document.createElement('figure');
      const img = document.createElement('img');
      img.src = src; img.alt = alt || '';
      const cap = document.createElement('figcaption');
      const span = document.createElement('span');
      span.textContent = alt || '';
      const del = document.createElement('button');
      del.className = 'btn';
      del.textContent = '×';
      del.title = 'remove';
      del.addEventListener('click', ()=> fig.remove());
      cap.append(span, del);
      fig.append(img, cap);
      gallery.append(fig);
    }

    function handleFiles(files){
      for(const file of files){
        if(!file.type.startsWith('image/')) continue;
        const url = URL.createObjectURL(file);
        addImage(url, file.name);
      }
    }

    // pick files
    const fileInput = $('#fileInput');
    $('label[for="fileInput"]').addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));

    // drag & drop
    ;['dragenter','dragover'].forEach(ev=> dropZone.addEventListener(ev, e=>{ e.preventDefault(); dropZone.style.background='#f3f6ff'; dropZone.style.borderColor='#7aa7ff'; }));
    ;['dragleave','drop'].forEach(ev=> dropZone.addEventListener(ev, e=>{ e.preventDefault(); dropZone.style.background=''; dropZone.style.borderColor=''; }));
    dropZone.addEventListener('drop', (e)=> handleFiles(e.dataTransfer.files));

    // add by URL
    $('#urlForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const url = $('#imgUrl').value.trim();
      const alt = $('#imgAlt').value.trim();
      if(url){ addImage(url, alt); $('#imgUrl').value=''; $('#imgAlt').value=''; }
    });
  </script></body>
</html>
